<div class="container fade-in my-3">
  <h2 class="text-center mb-4">Bidding Phase</h2>

  <div class="mb-4">
    <p><strong>Instructions:</strong></p>
    <ul>
      <li>Deal the cards evenly among players.</li>
      <li>
        The player to the left of the dealer should organize their cards first.
      </li>
      <li>
        Bidding starts with the player to the dealer's left and proceeds
        clockwise.
      </li>
    </ul>
  </div>

  <form class="mb-3">
    <div class="form-group mb-3">
      <label for="bidAmount">Enter Winning Bid Amount</label>
      <input
        type="number"
        id="bidAmount"
        [(ngModel)]="gameState.currentBid"
        (ngModelChange)="onBidAmountChange()"
        name="bidAmount"
        class="form-control"
        placeholder="Enter Bid Amount"
        min="0"
        required
      />
      <small *ngIf="noBidMessage" class="text-danger">{{ noBidMessage }}</small>
    </div>

    <div class="form-group mb-4">
      <label>Select Winning Team</label>
      <div
        *ngFor="let team of gameState.teams; let i = index"
        class="form-check mt-1 d-flex align-items-center"
      >
        <input
          type="radio"
          [id]="'team' + i"
          [(ngModel)]="primaryWinningTeamIndex"
          (ngModelChange)="onPrimaryWinningTeamChange()"
          [value]="i"
          name="winningTeam"
          class="form-check-input"
          required
          style="transform: scale(1.4);"
        />
        <label [for]="'team' + i" class="form-check-label fs-3 ml-1">{{
          team.name
        }}</label>
      </div>
    </div>

    <div *ngIf="shouldShowSecondaryWinnerChoice" class="form-group mb-4">
      <label>Select Secondary Winning Team</label>
      <ng-container *ngFor="let team of gameState.teams; let i = index">
        <div *ngIf="i !== primaryWinningTeamIndex" class="form-check">
          <input
            type="radio"
            [id]="'secondary-team' + i"
            [(ngModel)]="secondaryWinningTeamIndex"
            [value]="i"
            name="secondaryWinningTeam"
            class="form-check-input"
            required
          />
          <label [for]="'secondary-team' + i" class="form-check-label">{{
            team.name
          }}</label>
        </div>
      </ng-container>
    </div>

    <div class="form-group mt-3">
      <label for="trumpSuit">Select Trump Suit</label>
      <select
        id="trumpSuit"
        [(ngModel)]="gameState.trumpSuit"
        name="trumpSuit"
        class="form-control"
        required
      >
        <option value="" disabled selected>Select a suit</option>
        <option value="Hearts">♥ Hearts</option>
        <option value="Diamonds">♦ Diamonds</option>
        <option value="Clubs">♣ Clubs</option>
        <option value="Spades">♠ Spades</option>
      </select>
    </div>
  </form>

  <p class="text-muted mt-2">
    Note: If no one bids in the first round, reshuffle and redeal the cards.
  </p>

  <app-nav-buttons
    [goBackLabel]="goBackLabel"
    [goForwardLabel]="'Save Bid'"
    (backClicked)="goBack()"
    (forwardClicked)="submitBids()"
  />
</div>
